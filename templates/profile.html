{% extends "base.html" %}
{% block content %}

<!-- displays profile details -->
<div class="row">
    <div class="col s12 m8 offset-m2">
        <div class="card-panel">                       
            <h3 class="center-align light-blue-text text-darken-4">
                {{ angel_name }}
            </h3>
            <h3 class="center-align light-blue-text text-darken-4">
                Age: {{ angel_age }}
            </h3>
        </div>
    </div>
</div>

<div class="row">
    <h4 class="center-align">Books Reviewed:</h4>
</div>

    <ul class="collapsible popout">
        {% for book in books %}
        <li>
            <div class="collapsible-header white-text orange accent-3 text-shadow">
                <div class="col s3">
                    <i class="fas fa-caret-down"></i>
                    {% if session.user|lower == book.fun_viewed|lower %}
                        <a href="#remove{{ loop.index }}" class="btn-small green accent-4 waves-effect waves-light modal-trigger">Remove Book</a>
                        <a href="{{ url_for('edit_book', book_id=book._id) }}" class="btn-small light-blue accent-4">Edit Book</a>

                        <!-- modal body for removing a book -->
                        <div id="remove{{ loop.index }}" class="modal">
                            <div class="modal-content">
                                <h4>Are you sure you want to remove this book?</h4>                                
                            </div>
                            <div class="modal-footer">
                                <a href="{{ url_for('remove_book', book_id=book._id) }}" class="btn waves-light waves-effect yellow">Delete</a>
                                <a href="{{ url_for('get_books') }}" class="modal-close btn waves-light waves-effect  blue">Cancel</a>
                            </div>
                        </div>
                    {% endif %}
                </div>
                <div class="col s9">
                    <strong>{{ book.book_title }}</strong>
                    {% if book.is_recommend == "on" %}
                        <i class="fas fa-thumbs-up light-blue-text text-lighten-2 tooltipped"
                            data-position="right" data-tooltip="Recommended"></i>
                    {% endif %}
                </div>
               
            </div>            
            <div class="collapsible-body">
                <p>Author: <span>{{ book.book_author }}</span></p>                
                <p>What makes it a Fun Book: <br>{{ book.book_review }}</p>
                <p>Fun Meter: <span>{{ book.fun_meter }}</span></p>
                <p>Date Posted: <span>{{ book.date_posted }}</span></p>      
                <p><em> FunViewed by: {{ book.fun_viewed }}</em></p>          
                
                <div class="row">
                
                <!-- add a review --> 
                                             
                <a href="{{ url_for('add_review', book_id=book._id) }}" class="btn-small green accent-4">Add a Review</a>
                
                </div>
            </div>
        </li>        
        {% endfor %}
    </ul>


<!-- to delete a profile -->
<div class="row">
    <div class="col s12">
        <div class="center-align">
            |<a href="#delete-profile" class="modal-trigger">DELETE PROFILE</a>|
        </div>
    </div>
</div>

<!-- modal to delete account -->
<div id="delete-profile" class="modal delete-modal">
    <div class="modal-content">
        <h3 class="center-align">Delete Profile</h3>
        <p class="center-align">Are you sure you want to delete your account?</p>
        <p class="center-align">All of your data will be lost.</p>
        
        <div class="row">
            <div class="col s6 center-align">
                <a class="btn waves-light waves-effect yellow"
                    href="{{ url_for('delete_profile', critics_id=username) }}">
                DELETE
                </a>
            </div>
            <div class="col s6 center-align">
                <a href="#!" class="modal-close btn waves-light waves-effect btn blue">
                CANCEL
                </a>
            </div>
        </div>
    </div>
</div>

{% endblock %}